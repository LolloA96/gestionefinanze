<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Profilo - Gestione Finanze</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="hidden">
  <header class="main-header">
    <div class="user-info-left">
      <span class="welcome-text">Profilo</span>
    </div>
    <div class="profile-icon" id="profileIconProfile" tabindex="0">L</div>
  </header>

  <main class="profile-main">
    <section class="profile-card">
      <div class="avatar-large" id="profileInitial">L</div>
      <h2 id="profileFullName">Lorenzo Anfora</h2>
      <p id="profileEmail">email@example.com</p>
      <div class="profile-stats">
        <div class="stat"><small>Entrate totali</small><strong id="profileTotalIncome">0,00€</strong></div>
        <div class="stat"><small>Risparmi complessivi</small><strong id="profileCumulative">0,00€</strong></div>
      </div>
      <button id="editProfileBtn" class="btn-outline">Modifica Profilo</button>
      <button id="logoutBtn" class="btn-link">Esci</button>
    </section>

    <section class="profile-lists">
      <h3>Le tue spese mese per mese</h3>
      <!-- Elenco mesi con totale e bottone Visualizza -->
      <ul id="profileExpensesList" class="list"></ul>

      <!-- Template di una riga mese (JS clona e riempie) -->
      <template id="tpl-expense-month-row">
        <li class="expense-month-row">
          <span class="month-label">Settembre 2025</span>
          <span class="month-total" style="margin-left:auto; color: var(--danger)">-500,00€</span>
          <button class="btn btn-secondary view-month-btn" type="button">Visualizza</button>
        </li>
      </template>

      <h3>I tuoi risparmi</h3>
      <ul id="profileSavingsList" class="list"></ul>
    </section>
  </main>

  <!-- MODIFICA PROFILO OVERLAY -->
  <div id="editProfileOverlay" class="custom-overlay hidden">
    <div class="overlay-content">
      <button id="closeEditProfile" aria-label="Chiudi">&times;</button>
      <form id="editProfileForm" class="overlay-form">
        <label for="editFirstName">Nome</label>
        <input id="editFirstName" name="firstName" />
        <label for="editLastName">Cognome</label>
        <input id="editLastName" name="lastName" />
        <label for="editEmail">Email</label>
        <input id="editEmail" name="email" type="email" />
        <div class="overlay-actions">
          <button type="submit" class="btn-primary big">Salva</button>
        </div>
      </form>
    </div>
  </div>

  <!-- POPUP: dettaglio spese di un mese -->
  <dialog id="ov-expenses-month" class="overlay-card">
    <div class="overlay-body">
      <header class="overlay-header">
        <h3 id="ov-expenses-title">Spese del mese</h3>
        <button class="icon-btn close" aria-label="Chiudi">&times;</button>
      </header>
      <ul id="ov-expenses-list" class="list"></ul>
    </div>
  </dialog>

  <script type="module" src="profile.js"></script>
</body>
</html>
